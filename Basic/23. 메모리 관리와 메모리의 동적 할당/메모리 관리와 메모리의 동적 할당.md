## C언어의 메모리 구조
1. 운영체제에 의해서 마련되는 메모리의 구조는 4개의 영역으로 구분된다. (코드영역, 데이터영역, 스택영역, 힙영역)   
2. 코드 영역은 이름 그대로 실행할 프로그램의 코드가 저장되는 메모리공간이다. 따라서 CPU는 코드 영역에 저장된 명령문들을 하나씩 가져가서 실행을 한다.   
3. 데이터 영역은 전역변수와 static변수가 할당된다. 이 영역에 할당되는 변수들은 프로그램의 시작과 동시에 메모리공간에 할당되어 프로그램 종료시까지 남아있게 되는 특징이 있다.   
4. 스택 영역은 지역변수와 매개변수가 할당된다. 이 영영에 할당되는 변수들은 선언된 함수를 빠져나가면 소멸된다는 특징이 있다.   
5. 힙 영역은 생성과 소멸의 시점이 이미 결정되어 있는 데이터영역과 스택영역과 다르게 프로그래머가 원하는 시점에 변수를 할당하고 또 소멸하도록 제공해주는 영역이다.   

## 메모리의 동적 할당
1. 생성과 소멸의 시기가 지역변수나 전역변수와 다른 유형의 변수는 malloc과 free함수를 통해 힙 영역에 할당하고 소멸시킬 수 있다.   
2. malloc함수는 힙 공간을 할당하고, 할당된 힙 공간은 free함수를 통해 해제할 수 있다.   
   ```
   #include <stdlib.h>
   void * malloc(size_t size); // 힙 영역으로의 메모리 공간 할당
   void free(void * ptr);      // 힙 영역에 할당된 메모리 공간해제
   →　malloc함수는 성공시 할당된 메모리의 주소값, 실패시 NULL을 반환한다.
   ```
3. 힙 영역을 흔히 프로그래머가 관리하는 메모리 공간이라고 한다. 이유는 malloc함수 호출로 할당된 메모리 공간은 프로그래머가 직접 free함수의 호출을 통해서 해제하지 않으면 계속 남아있기 때문이다.   
4. malloc함수를 사용하면 힙 영역에 메모리공간을 할당해주고, void*형 주소값을 반환해준다. malloc함수의 반환 값에 아무런 가공도 하지 않으면, 이를 이용해서는 할당된 메모리 공간에 접근이 불가능하다. 때문에 할당된 공간을 해석할 근거를 제시해야하고, 그것을 강제 형변환을 통해 제공해준다.   
   ```
   ex)
      int * ptr1 = (int *) malloc(sizeof(int));
      double * ptr2 = (double *) malloc(sizeof(double));
      int * ptr3 = (int *) malloc(sizeof(int) * 20);
      double * ptr4 = (int *) malloc(sizeof(double) * 10);
   ```
5. malloc함수가 메모리공간의 할당에 실패할 경우 NULL을 반환하는데 필요에 따라서는 처리를 추가할 수 있다.   
   ```
   ex)
      int * ptr = (int *)malloc(sizeof(int));
      if(ptr == NULL) {
        // 메모리 할당 실패에 따른 오류 처리
      }
   ```
6. calloc함수는 malloc함수와 똑같은 역할을 해주지만, 매개변수의 사용법과 calloc함수는 할당된 메모리를 초기화해준다는 점에서 차이가 있다.   
   ```
   #include <stdlib.h>
   void * calloc(size_t elt_count, size_t elt_size);
   → 성공시 할당된 메모리의 주소값, 실패시 NULL 반환
   // malloc은 메모리공간을 초기화하지 않지만, calloc은 모든 비트를 0으로 초기화 한다.
   ```
   ```
   ex) int* ptr = (int *)calloc(30, sizeof(4)); 
       // 4바이트 크기의 블록 30개를 힙 영역에 할당해주세요라는 의미
   ```
7. realloc함수는 힙에 할당된 메모리 공간의 사이즈를 조절할 때 사용한다.    
   ```
   #include<stdlib.h>
   void * realloc(void * ptr, size_t size);
   → 성공시 새로 할당된 메모리의 주소값, 실패시 NULL반환
   ```
   ```
   ex)
      int * arr = (int *)malloc(sizeof(int) * 3);
      arr = (int *)realloc(sizeof(int) * 10);
   ```